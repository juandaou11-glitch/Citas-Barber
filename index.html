<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Agenda de Citas</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f2f2f2;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }
    .container {
      background: #ffffff;
      width: 95%;
      max-width: 450px;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 20px rgba(0,0,0,0.15);
    }
    .logo {
      width: 120px;
      display: block;
      margin: 0 auto 10px auto;
    }
    h2 {
      text-align: center;
      color: #333;
      margin-bottom: 20px;
    }
    label {
      font-weight: bold;
      color: #333;
    }
    select, input[type="date"] {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      border-radius: 6px;
      border: 1px solid #999;
    }
    button {
      width: 100%;
      padding: 12px;
      background: #0a66c2;
      border: none;
      border-radius: 6px;
      color: white;
      font-size: 16px;
      cursor: pointer;
      margin-top: 10px;
    }
    button:hover {
      background: #004a99;
    }
    .panel {
      margin-top: 30px;
      background: #fafafa;
      padding: 15px;
      border-radius: 10px;
      border: 1px solid #ddd;
    }
    .panel h3 {
      margin-top: 0;
      text-align: center;
    }
    .cita-item {
      padding: 8px;
      margin: 5px 0;
      background: #e8f0fe;
      border-radius: 6px;
    }
  </style>
</head>
<body>
  <div class="container">

    <!-- Logo -->
    <img src="logo.png" alt="Logo" class="logo">

    <h2>Agendar Cita</h2>

    <label>Selecciona una fecha:</label>
    <input type="date" id="fecha" />

    <label>Selecciona la hora:</label>
    <select id="hora"></select>

    <button onclick="confirmarCita()">Confirmar Cita</button>

    <!-- Panel de monitoreo -->
    <div class="panel">
      <h3>Panel de Citas</h3>
      <div id="listaCitas"></div>
    </div>
  </div>

<script>
  const horasDisponibles = [
    "13:00", "13:30", "14:00", "14:30", "15:00", "15:30",
    "16:00", "16:30", "17:00", "17:30", "18:00", "18:30",
    "19:00", "19:30", "20:00", "20:30", "21:00", "21:30", "22:00"
  ];

  let citas = JSON.parse(localStorage.getItem("citas")) || [];

  function cargarHoras() {
    const select = document.getElementById("hora");
    select.innerHTML = "";
    horasDisponibles.forEach(h => {
      const opt = document.createElement("option");
      opt.value = h;
      opt.textContent = h;
      select.appendChild(opt);
    });
  }

  function actualizarHoras() {
    const fecha = document.getElementById("fecha").value;
    const select = document.getElementById("hora");
    select.innerHTML = "";

    horasDisponibles.forEach(h => {
      const ocupada = citas.some(c => c.fecha === fecha && c.hora === h);
      if (!ocupada) {
        const opt = document.createElement("option");
        opt.value = h;
        opt.textContent = h;
        select.appendChild(opt);
      }
    });
  }

  document.getElementById("fecha").addEventListener("change", actualizarHoras);

  function confirmarCita() {
    const fecha = document.getElementById("fecha").value;
    const hora = document.getElementById("hora").value;

    if (!fecha || !hora) {
      alert("Selecciona una fecha y hora");
      return;
    }

    citas.push({ fecha, hora });
    localStorage.setItem("citas", JSON.stringify(citas));
    mostrarCitas();
    actualizarHoras();

    alert("Cita Registrada correctamente");
  }

  function mostrarCitas() {
    const panel = document.getElementById("listaCitas");
    panel.innerHTML = "";

    citas.forEach(c => {
      const div = document.createElement("div");
      div.className = "cita-item";
      div.textContent = `${c.fecha} - ${c.hora}`;
      panel.appendChild(div);
    });
  }

  cargarHoras();
  mostrarCitas();
</script>

</body>
</html>
