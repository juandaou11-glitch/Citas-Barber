<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Agenda tu cita</title>

<style>
    body {
        font-family: Arial, sans-serif;
        margin: 20px;
        background: #f7f7f7;
    }
    h2 {
        text-align: center;
    }
    .card {
        background: white;
        padding: 20px;
        border-radius: 10px;
        max-width: 500px;
        margin: auto;
        box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    select, button, input {
        width: 100%;
        padding: 12px;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #ccc;
        font-size: 16px;
    }
    button {
        background: #007bff;
        color: white;
        border: none;
        font-size: 18px;
        cursor: pointer;
    }
    button:hover {
        background: #0056b3;
    }
    .success {
        background: #d4edda;
        padding: 15px;
        border-radius: 8px;
        color: #155724;
        margin-top: 15px;
        text-align: center;
    }
</style>
</head>
<body>

<div class="card">
    <h2>Agendar Cita</h2>

    <label>Selecciona el d√≠a</label>
    <input type="date" id="fecha" min="" required>

    <label>Selecciona la hora</label>
    <select id="hora" required></select>

    <label>Tu nombre</label>
    <input type="text" id="nombre" placeholder="Tu nombre" required>

    <label>Tu WhatsApp</label>
    <input type="text" id="telefono" placeholder="Ejemplo: 3001234567" required>

    <button onclick="confirmar()">Confirmar Cita</button>

    <div id="mensaje"></div>
</div>

<script>
    // Fecha m√≠nima = hoy
    const fechaInput = document.getElementById("fecha");
    const hoy = new Date().toISOString().split("T")[0];
    fechaInput.min = hoy;

    const horaSelect = document.getElementById("hora");

    function generarHoras() {
        let inicio = 13 * 60; // 1:00 pm
        let fin = 22 * 60;   // 10:00 pm

        for (let min = inicio; min <= fin; min += 30) {
            let h = Math.floor(min / 60);
            let m = min % 60;
            let formato = (h > 12 ? h - 12 : h) + ":" + (m < 10 ? "0" + m : m) + (h >= 12 ? " PM" : " AM");

            const opt = document.createElement("option");
            opt.value = formato;
            opt.textContent = formato;
            horaSelect.appendChild(opt);
        }
    }

    generarHoras();

    function confirmar() {
        const fecha = fechaInput.value;
        const hora = horaSelect.value;
        const nombre = document.getElementById("nombre").value.trim();
        const telefono = document.getElementById("telefono").value.trim();

        if (!fecha || !hora || !nombre || !telefono) {
            alert("Por favor completa todos los campos.");
            return;
        }

        const mensaje = `Nueva cita:%0A%0AüìÖ *D√≠a:* ${fecha}%0A‚è∞ *Hora:* ${hora}%0Aüë§ *Cliente:* ${nombre}%0Aüì± *WhatsApp:* ${telefono}`;

        const url = `https://wa.me/573044529996?text=${mensaje}`;

        document.getElementById("mensaje").innerHTML =
            `<div class="success">Cita confirmada üéâ<br>Te redireccionaremos a WhatsApp.</div>`;

        setTimeout(() => {
            window.open(url, "_blank");
        }, 1500);
    }
</script>

</body>
</html>
